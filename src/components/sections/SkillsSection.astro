---
import { Icon } from 'astro-icon';
import SectionLayout from '../../layouts/SectionLayout.astro';
import { skills } from '../../data/site.json';
---

<SectionLayout
  id="skills"
  heading="Skills"
  text="Technologies I've worked with"
>
  <div class="relative">
    {
      skills.map(({ title, list }) => (
        <div class="mt-8">
          <h2 class="mb-4 text-lg font-bold">{title}</h2>
          <ul class="ml-4 grid gap-y-4 gap-x-8 sm:gap-x-12">
            {list.map(({ icon, language }) => (
              <li class="flex w-14 flex-col items-center gap-2 sm:w-16">
                <div class="flex h-14 w-full items-center justify-center rounded-full bg-gray-100 sm:h-16">
                  <Icon name={icon} class="h-7 w-7 sm:h-8 sm:w-8" />
                </div>
                <span class="text-center text-sm sm:text-base">{language}</span>
              </li>
            ))}
          </ul>
        </div>
      ))
    }
    <div
      id="background-lottie"
      class="absolute right-0 top-4 -z-10 hidden w-[500px] lg:block"
    >
      <div
        id="reading-lottie"
        class="absolute lg:top-[125px] lg:right-[125px] lg:w-[250px]"
      >
      </div>
    </div>
  </div>
  <div
    id="astronaut-reading-lottie"
    class="absolute right-0 top-0 -z-10 w-[150px] xs:top-4 xs:w-[200px] sm:-top-2 sm:w-[250px] lg:hidden"
  >
  </div>
</SectionLayout>

<style>
  ul {
    grid-template-columns: repeat(auto-fill, 4rem);
  }
</style>

<script>
  import lottie from 'lottie-web';
  import backgroundAnimation from '../../lotties/background.json';
  import astronautReadingAnimation from '../../lotties/astronaut-reading.json';

  const backgroundLottieContainer =
    document.getElementById('background-lottie')!;
  const astronautReadingLottieContainer = document.getElementById(
    'astronaut-reading-lottie'
  )!;
  const readingLottieContainer = document.getElementById('reading-lottie')!;

  lottie.loadAnimation({
    container: backgroundLottieContainer,
    renderer: 'svg',
    loop: true,
    autoplay: true,
    animationData: backgroundAnimation,
  });

  lottie.loadAnimation({
    container: readingLottieContainer,
    renderer: 'svg',
    loop: true,
    autoplay: true,
    animationData: astronautReadingAnimation,
  });

  lottie.loadAnimation({
    container: astronautReadingLottieContainer,
    renderer: 'svg',
    loop: true,
    autoplay: true,
    animationData: astronautReadingAnimation,
  });
</script>
